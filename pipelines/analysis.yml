ESLint:
  stage: analysis
  tags:
    - hpi-deploy
  image:
    name: node:20.11.1-alpine
  script:
    - . ${CI_PROJECT_DIR}/.gitlab/install_node_dependencies.sh
    - npx eslint .
  rules:
    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'

CommitLint:
    stage: analysis
    image: node:20
    tags:
      - hpi-deploy
    variables:
        GIT_DEPTH: 0
    script:
      - rm package.json package-lock.json
      - npm install --force @commitlint/cli@^17.4.4 @commitlint/config-conventional@^17.4.4
      - npx commitlint --from=$CI_MERGE_REQUEST_DIFF_BASE_SHA
    rules:
      - if: $CI_PIPELINE_SOURCE == 'merge_request_event'
